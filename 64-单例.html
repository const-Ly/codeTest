<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        
        //如果我想写一个高阶函数，高阶函数接受一个函数为参数，返回一个新的函数，这个新的函数和原函数功能一样，但是多了单例的效果，如何实现？



        function singleFn(fn) {
            let result;
            return function(...args) {
                result = result || fn.apply(this, args)
                return result;
            }
        }




        // 单例模式的定义是： 保证一个类有且仅有一个实例，并提供一个访问它的全局访问点。

        // 基于上面的解释，我们发现全局变量都是符合“单例模式”的。

        const Singleton = (function () {
            let instance = null;

            return function (name) {
                if (instance) {
                    return instance;
                }
                // 你的业务逻辑
                this.name = name;
                return instance = this;
            }
        })();

        // test
        const a = new Singleton("liu");
        const b = new Singleton("liu1");

        console.log(a === b); // true


        //如果我想写一个高阶函数，高阶函数接受一个函数为参数，返回一个新的函数，这个新的函数和原函数功能一样，但是多了单例的效果，如何实现？
        var getSingle = function (fn) {
            var result;
            return function () {
                return result || (result = fn.apply(this, arguments));
            }
        };


        function implementMapUsingReduce(list, func) {
            return list.reduce((acc, cur, i) => {
                acc[i] = func(cur);
                return acc;
            }, []);
        }
    </script>
</body>

</html>